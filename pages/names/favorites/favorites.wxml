<!-- Decorative Background Elements -->
<view class="decorative-bg">
  <view class="gradient-circle circle-1"></view>
  <view class="gradient-circle circle-2"></view>
  <view class="gradient-circle circle-3"></view>
  <view class="gradient-wave"></view>
</view>

<view class="creative-bg"></view>

<view class="favorites-page">
  <!-- Loading State -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="spinner"></view>
  </view>

  <block wx:else>
    <!-- Navbar -->
    <t-navbar
      t-class-placeholder="favorites-navbar-placeholder"
      t-class-content="favorites-navbar-content"
      class="favorites-navbar"
    >
      <view slot="left" class="back-btn" bindtap="navigateBack">
        <image class="back-icon" src="/images/icons/goback-s.svg" mode="aspectFit" />
      </view>
    </t-navbar>

    <!-- Header Actions -->
    <view class="header-actions">
      <view class="stats-section">
        <view class="stats-badge">
          <view class="stats-number">{{favoriteNames.length}}</view>
          <view class="stats-label">ياقتۇرغان ئىسىملار</view>
        </view>
      </view>
      <view class="filters-section">
        <view class="action-btn" bindtap="toggleSortOrder">
          <image class="action-icon" src="{{sortOrder === 'time' ? '/images/icons/time-order.svg' : '/images/icons/alphabet-order.svg'}}" mode="aspectFit" />
          <view class="action-text">{{sortOrder === 'time' ? 'ۋاقىت' : 'ئېلىپبە'}}</view>
        </view>
        <view class="action-btn" bindtap="toggleGenderFilter">
          <image class="action-icon" src="{{genderFilter === 'all' ? '/images/icons/gender-both.svg' : (genderFilter === 'male' ? '/images/icons/gender-male.svg' : '/images/icons/gender-female.svg')}}" mode="aspectFit" />
          <view class="action-text">{{genderFilter === 'all' ? 'بارلىق' : (genderFilter === 'male' ? 'ئوغۇل' : 'قىز')}}</view>
        </view>
      </view>
    </view>

    <!-- Names List -->
    <view class="names-container">
      <view class="name-card" 
            wx:for="{{displayNames}}" 
            wx:key="id"
            bindtap="navigateToDetail"
            data-id="{{item.id}}">
        <view class="avatar-container {{item.gender}}-avatar">
          <text class="avatar-letter">{{item.nameUyghur[0] === 'ئ' ? item.nameUyghur[0] + item.nameUyghur[1] : item.nameUyghur[0]}}</text>
        </view>
        <view class="name-details">
          <view class="name-title">{{item.nameUyghur}}</view>
          <view class="name-subtitle">{{item.nameLatin}} {{item.nameChinese}}</view>
        </view>
        <view class="name-actions">
          <text class="save-time {{item.gender}}-time">{{item.saveTimeText}}</text>
          <view class="unfavorite-btn" catchtap="removeFavorite" data-id="{{item.id}}">
            <image class="unfavorite-icon" src="/images/icons/unlike.svg" mode="aspectFit" />
          </view>
        </view>
      </view>
    </view>

    <!-- Empty State -->
    <view class="empty-state" wx:if="{{favoriteNames.length === 0}}">
      <image class="empty-image" src="/images/illust/no-match.svg" mode="aspectFit"></image>
      <text class="empty-title">ساقلىۋالغان ئىسىم يوق</text>
      <text class="empty-subtitle">ئىسىملارنى ساقلاش ئۈچۈن يۈرەك بەلگىسىنى بېسىڭ</text>
      <view class="search-btn" bindtap="navigateToSearch">
        <text class="btn-text">ئىسىملار ئامبىرى</text>
      </view>
    </view>
  </block>
</view> 